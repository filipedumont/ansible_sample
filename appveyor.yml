version: '1.0.{build}-{branch}'
image: Ubuntu1804
platform: x64

# Debugging via SSH
init:
- sh: curl -sflL 'https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-ssh.sh' | bash -e -

cache:
- /home/appveyor/.vagrant.d/boxes

install:
- sudo wget https://download.virtualbox.org/virtualbox/6.1.2/virtualbox-6.1_6.1.2-135662~Ubuntu~bionic_amd64.deb
- sudo dpkg -i virtualbox-6.1_6.1.2-135662~Ubuntu~bionic_amd64.deb
- sudo apt-get -yq install python-pip
# How did the VirtualBox installation go?
- VBoxManage --version
- sudo pip install ansible==2.9.4
# Ansible correctly installed?
- ansible --version

- sudo wget -nv https://releases.hashicorp.com/vagrant/2.2.7/vagrant_2.2.7_x86_64.deb
# Install Vagrant package
- sudo dpkg -i vagrant_2.2.7_x86_64.deb
# Vagrant correctly installed?
- vagrant --version

build_script:
- make start_apache
